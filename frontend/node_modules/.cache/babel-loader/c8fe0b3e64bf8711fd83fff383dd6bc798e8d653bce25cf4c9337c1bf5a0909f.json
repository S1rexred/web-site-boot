{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{Col,Button,Row,Container,Card,Form}from'react-bootstrap';import{Link}from'react-router-dom/cjs/react-router-dom.min';import{useHistory}from'react-router-dom/cjs/react-router-dom.min';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[email,setEmail]=useState('');const[password,setPassword]=useState('');const history=useHistory();const handleRedirect=()=>{history.push('/');};// Create the submit method.\nconst submit=async e=>{e.preventDefault();const user={email:email,password:password};const config={headers:{'Content-Type':'application/json'},withCredentials:true};try{const{data}=await axios.post('http://localhost:3000/token/',user,config);localStorage.clear();console.log(data.access);localStorage.setItem('access_token',data.access);localStorage.setItem('refresh_token',data.refresh);axios.defaults.headers.common['Authorization']=`Bearer ${data.access}`;window.location.href='/';}catch(error){console.error('Ошибка при входе:',error);// Здесь можно добавить логику для отображения ошибки пользователю\n}};return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Form,{onSubmit:submit,children:/*#__PURE__*/_jsx(Row,{className:\"vh-100 d-flex justify-content-center align-items-center\",children:/*#__PURE__*/_jsxs(Col,{md:8,lg:6,xs:12,children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-3 border-primary border\"}),/*#__PURE__*/_jsx(Card,{className:\"shadow\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 mt-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"fw-bold text-uppercase mb-2\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-5\",children:\"\\u041A\\u0430\\u0444\\u0435 Italy\"}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicEmail\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"text-center\",children:\"\\u0412\\u0430\\u0448\\u0430 \\u043F\\u043E\\u0447\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mt-1\",placeholder:\"\\u041F\\u043E\\u0447\\u0442\\u0430\",name:\"email\",type:\"text\",value:email,required:true,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"text-center\",children:\"\\u0412\\u0430\\u0448 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mt-1\",name:\"password\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",type:\"password\",value:password,required:true,onChange:e=>setPassword(e.target.value)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"p\",{className:\"small\",children:/*#__PURE__*/_jsx(\"a\",{className:\"text-primary\",href:\"#!\",children:\"\\u0417\\u0430\\u0431\\u044B\\u043B\\u0438 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C?\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0 text-center\",children:[\"\\u0423 \\u0432\\u0430\\u0441 \\u043D\\u0435\\u0442 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"text-primary fw-bold\",children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]})})]})})})]})})})});};export default Login;","map":{"version":3,"names":["React","useState","axios","Col","Button","Row","Container","Card","Form","Link","useHistory","jsx","_jsx","jsxs","_jsxs","Login","email","setEmail","password","setPassword","history","handleRedirect","push","submit","e","preventDefault","user","config","headers","withCredentials","data","post","localStorage","clear","console","log","access","setItem","refresh","defaults","common","window","location","href","error","children","onSubmit","className","md","lg","xs","Body","Group","controlId","Label","placeholder","name","type","value","required","onChange","target","variant","to"],"sources":["C:/web-site-boot/src/Components/Login.jsx"],"sourcesContent":["import React,{useState} from 'react'\r\nimport axios from 'axios'\r\nimport { Col, Button, Row, Container, Card, Form } from 'react-bootstrap'\r\nimport { Link } from 'react-router-dom/cjs/react-router-dom.min';\r\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\r\nconst Login = () => {\r\n  const [email,setEmail] = useState('');\r\n  const [password,setPassword] = useState('');\r\n\r\n  const history = useHistory();\r\n\r\n  const handleRedirect = () => {\r\n    history.push('/');\r\n  };\r\n\r\n// Create the submit method.\r\nconst submit = async e => {\r\n  e.preventDefault();\r\n\r\n  const user = {\r\n    email: email,\r\n    password: password,\r\n  };\r\n\r\n  const config = {\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    withCredentials: true,\r\n  };\r\n\r\n  try {\r\n    const { data } = await axios.post('http://localhost:3000/token/', user, config);\r\n    localStorage.clear();\r\n    console.log(data.access);\r\n    localStorage.setItem('access_token', data.access);\r\n    localStorage.setItem('refresh_token', data.refresh);\r\n    axios.defaults.headers.common['Authorization'] = `Bearer ${data.access}`;\r\n    window.location.href = '/';\r\n  } catch (error) {\r\n    console.error('Ошибка при входе:', error);\r\n    // Здесь можно добавить логику для отображения ошибки пользователю\r\n  }\r\n};\r\n\r\n  return (\r\n    <Container>\r\n      <Form onSubmit={submit} >\r\n      <Row className=\"vh-100 d-flex justify-content-center align-items-center\">\r\n        <Col md={8} lg={6} xs={12}>\r\n          <div className=\"border-3 border-primary border\"></div>\r\n          <Card className=\"shadow\">\r\n            <Card.Body>\r\n              <div className=\"mb-3 mt-4\">\r\n                <h2 className=\"fw-bold text-uppercase mb-2\">Войти</h2>\r\n                <p className=\"mb-5\">Кафе Italy</p>\r\n                \r\n                  <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n                    <Form.Label className=\"text-center\">Ваша почта</Form.Label>\r\n                    <input className=\"form-control mt-1\" \r\n                        placeholder=\"Почта\" \r\n                        name='email'  \r\n                        type='text' value={email}\r\n                        required \r\n                        onChange={e => setEmail(e.target.value)}/>\r\n                  </Form.Group>\r\n\r\n                  <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                  <Form.Label className=\"text-center\">Ваш пароль</Form.Label>\r\n                  <input className=\"form-control mt-1\" \r\n                        name='password' \r\n                        placeholder=\"Пароль\"\r\n                        type=\"password\" value={password}\r\n                        required\r\n                        onChange={e => setPassword(e.target.value)}/>\r\n                  </Form.Group>\r\n                  <div className=\"mb-3\">\r\n                    <p className=\"small\">\r\n                      <a className=\"text-primary\" href=\"#!\">\r\n                        Забыли пароль?\r\n                      </a>\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"d-grid\">\r\n                    <Button variant=\"primary\" type=\"submit\">\r\n                      Войти\r\n                    </Button>\r\n                  </div>\r\n                \r\n                <div className=\"mt-3\">\r\n                  <p className=\"mb-0 text-center\">\r\n                    У вас нет аккаунта?{' '}\r\n                    <Link to=\"/register\" className=\"text-primary fw-bold\">\r\n                        Зарегистрироваться\r\n                    </Link>\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n      </Form>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Login\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}